<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SpiralTorch COBOL Dispatch Console</title>
    <link rel="stylesheet" href="./src/style.css" />
  </head>
  <body>
    <main class="app">
      <section class="pane">
        <header>
          <h1>SpiralTorch COBOL Dispatch Console</h1>
          <p class="subtitle">
            Configure language narrators in the browser (WASM) and forward them to your
            mainframe bridge.
          </p>
        </header>
        <form id="planner-form">
          <fieldset>
            <legend>Envelope identity</legend>
            <label>
              Job identifier
              <input id="job-id" name="job-id" required value="demo-lab" />
            </label>
            <label>
              Release channel
              <input id="release-channel" name="release-channel" value="staging" />
            </label>
            <label>
              Metadata JSON
              <textarea id="metadata" name="metadata" rows="4" placeholder='{"campaign":"aurora"}'></textarea>
            </label>
            <div class="inline">
              <label>
                Human curator
                <input id="human-name" name="human-name" placeholder="Operator Kana" />
              </label>
              <label>
                Model initiator
                <input id="model-name" name="model-name" placeholder="lm://spiraltorch/language" />
              </label>
            </div>
          </fieldset>
          <fieldset>
            <legend>Narrator configuration</legend>
            <div class="inline">
              <label>
                Curvature
                <input id="curvature" name="curvature" type="number" step="0.01" value="0.48" />
              </label>
              <label>
                Temperature
                <input id="temperature" name="temperature" type="number" step="0.01" value="0.67" />
              </label>
              <label>
                Encoder key
                <input id="encoder" name="encoder" value="st-language.wave" />
              </label>
              <label>
                Locale (optional)
                <input id="locale" name="locale" placeholder="ja-JP" />
              </label>
            </div>
            <label>
              Resonance coefficients
              <textarea
                id="coefficients"
                name="coefficients"
                rows="6"
                placeholder="0.12, 0.42, 0.9"
              ></textarea>
            </label>
            <button type="button" id="seed-coeffs">Seed with demo buffer</button>
          </fieldset>
          <fieldset>
            <legend>Mainframe routing</legend>
            <div class="inline">
              <label>
                MQ queue manager
                <input id="mq-manager" name="mq-manager" placeholder="QM1" />
              </label>
              <label>
                MQ queue name
                <input id="mq-queue" name="mq-queue" placeholder="ST.NARRATION.IN" />
              </label>
              <label>
                MQ commit policy
                <input id="mq-commit" name="mq-commit" placeholder="syncpoint" />
              </label>
            </div>
            <div class="inline">
              <label>
                CICS transaction
                <input id="cics-transaction" name="cics-transaction" placeholder="STXR" />
              </label>
              <label>
                CICS program
                <input id="cics-program" name="cics-program" placeholder="STLANG" />
              </label>
              <label>
                CICS channel
                <input id="cics-channel" name="cics-channel" placeholder="NARRATE" />
              </label>
            </div>
            <label>
              Dataset/GDG target
              <input id="dataset" name="dataset" placeholder="ST.DATA.NARRATION(+1)" />
            </label>
            <div class="inline">
              <label>
                PDS member (optional)
                <input id="dataset-member" name="dataset-member" placeholder="NARRATE" />
              </label>
              <label>
                Disposition
                <input id="dataset-disposition" name="dataset-disposition" placeholder="SHR" />
              </label>
              <label>
                Volume serial
                <input id="dataset-volume" name="dataset-volume" placeholder="VOL001" />
              </label>
            </div>
            <div class="inline">
              <label>
                Record format
                <input id="dataset-record-format" name="dataset-record-format" placeholder="FB" />
              </label>
              <label>
                Record length
                <input id="dataset-record-length" name="dataset-record-length" placeholder="512" />
              </label>
              <label>
                Block size
                <input id="dataset-block-size" name="dataset-block-size" placeholder="6144" />
              </label>
            </div>
            <div class="inline">
              <label>
                Data class
                <input id="dataset-data-class" name="dataset-data-class" placeholder="NARRATE" />
              </label>
              <label>
                Management class
                <input
                  id="dataset-management-class"
                  name="dataset-management-class"
                  placeholder="GDG"
                />
              </label>
              <label>
                Storage class
                <input id="dataset-storage-class" name="dataset-storage-class" placeholder="FASTIO" />
              </label>
            </div>
          </fieldset>
          <fieldset>
            <legend>Dispatch</legend>
            <label>
              HTTP bridge endpoint
              <input id="bridge-endpoint" name="bridge-endpoint" placeholder="https://zbridge.example/api/cobol" />
            </label>
            <div class="inline actions">
              <button type="submit" class="primary">Generate envelope</button>
              <button type="button" id="send-envelope">Send to bridge</button>
            </div>
          </fieldset>
        </form>
      </section>
      <section class="pane output">
        <header>
          <h2>Preview</h2>
          <p class="subtitle">Inspect the generated JSON envelope and COBOL pointer summary.</p>
        </header>
        <article>
          <h3>Dispatch envelope</h3>
          <pre id="json-preview" class="code"></pre>
        </article>
        <article>
          <h3>COBOL preview</h3>
          <pre id="cobol-preview" class="code"></pre>
        </article>
        <article>
          <h3>MQ payload</h3>
          <p>
            <span id="payload-bytes">0</span> bytes. Use the send button to POST the buffer to the
            selected bridge.
          </p>
        </article>
        <article>
          <h3>Status</h3>
          <p id="status">Waiting for inputâ€¦</p>
        </article>
      </section>
    </main>
    <script type="module" src="./src/main.ts"></script>
  </body>
</html>
